{"version":3,"file":"backed-client.js","sources":["../src/backed-client.js"],"sourcesContent":["'use strict';\r\nBacked(class BackedClient extends HTMLElement {\r\n\r\n  static get properties() {\r\n    return {\r\n      backedNpmFile: {\r\n        observer: 'fileChange'\r\n      },\r\n\r\n      bowerFile: {\r\n        observer: 'fileChange'\r\n      },\n\r\n      npmFile: {\r\n        observer: 'fileChange'\r\n      },\r\n\r\n      name: {\r\n        observer: 'nameChange'\r\n      },\r\n\r\n      version: {\r\n        observer: 'versionChange'\r\n      },\r\n\r\n      backedVersion: {\r\n        observer: 'backedVersionChange'\r\n      }\r\n    }\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  connectedCallback() {\r\n    // let xhttp = new XMLHttpRequest();\r\n    // xhttp.onreadystatechange = this.xhttpOnReadyStateChange;\r\n    try {\r\n      this.getBackedNpmFile();\r\n      this.getNpmFile();\r\n      this.getBowerFile();\r\n    } catch (error) {\r\n      console.warn(error);\r\n    }\r\n  }\r\n\r\n  request(url, cb) {\r\n    let xhttp = new XMLHttpRequest();\r\n    xhttp.onreadystatechange = cb;\r\n    xhttp.open('GET', url, true);\r\n    xhttp.send();\r\n  }\r\n\r\n  getBackedNpmFile() {\r\n    this.request('/backed/package.json', (event) => {\r\n      const target = event.target;\r\n      if (target.readyState == 4 && target.status == 200) {\r\n        this.backedNpmFile = JSON.parse(target.response);\r\n      }\r\n    });\r\n  }\r\n\r\n  getBowerFile() {\r\n    this.request('/bower.json', (event) => {\r\n      const target = event.target;\r\n      if (target.readyState == 4 && target.status == 200) {\r\n        this.bowerFile = JSON.parse(target.response);\r\n      }\r\n    });\r\n  }\r\n\r\n  getNpmFile() {\r\n    this.request('/package.json', (event) => {\r\n      const target = event.target;\r\n      if (target.readyState == 4 && target.status == 200) {\r\n        this.npmFile = JSON.parse(target.response);\r\n      }\r\n    });\r\n  }\r\n\r\n  fileChange(change) {\r\n    if (this.bowerFile && this.npmFile && this.backedNpmFile) {\r\n      this.name = this.bowerFile.name || this.npmFile.name;\r\n      // const authors = this.bowerFile.authors || this.npmFile.authors;\r\n      // const homepage = this.bowerFile.homepage || this.npmFile.homepage;\r\n      this.version = this.bowerFile.version || this.npmFile.version;\r\n      this.backedVersion = this.backedNpmFile.version;\r\n    }\r\n  }\r\n\r\n  nameChange(change) {\r\n    this.querySelector('.project').innerHTML = `${change.value}`;\r\n  }\r\n\r\n  versionChange(change) {\r\n    this.querySelector('.project-version').innerHTML = `${change.value}`;\r\n  }\r\n\r\n  backedVersionChange(change) {\r\n    this.querySelector('.project-version.backed').innerHTML = `${change.value}`;\r\n  }\r\n})\r\n"],"names":[],"mappings":"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"}