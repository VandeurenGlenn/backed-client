{"version":3,"file":"backed-client.js","sources":["../src/backed-client.js"],"sourcesContent":["'use strict';\r\nBacked(class BackedClient extends HTMLElement {\r\n\r\n  static get properties() {\r\n    return {\r\n      backedNpmFile: {\r\n        observer: 'fileChange'\r\n      },\r\n\r\n      npmFile: {\r\n        observer: 'fileChange'\r\n      },\r\n\r\n      name: {\r\n        observer: 'nameChange'\r\n      },\r\n\r\n      version: {\r\n        observer: 'versionChange'\r\n      },\r\n\r\n      backedVersion: {\r\n        observer: 'backedVersionChange'\r\n      }\r\n    }\r\n  }\r\n\r\n  connected() {\r\n    // let xhttp = new XMLHttpRequest();\r\n    // xhttp.onreadystatechange = this.xhttpOnReadyStateChange;\r\n    try {\r\n      this.getBackedNpmFile();\r\n      this.getNpmFile();\r\n    } catch (error) {\r\n      console.warn(error);\r\n    }\r\n  }\r\n\r\n  request(url, cb) {\r\n    let xhttp = new XMLHttpRequest();\r\n    xhttp.onreadystatechange = cb;\r\n    xhttp.open('GET', url, true);\r\n    xhttp.send();\r\n  }\r\n\r\n  getBackedNpmFile() {\r\n    this.request('/node_modules/backed/package.json', (event) => {\r\n      const target = event.target;\r\n      if (target.readyState == 4 && target.status == 200) {\r\n        this.backedNpmFile = JSON.parse(target.response);\r\n      }\r\n    });\r\n  }\r\n\r\n  getNpmFile() {\r\n    this.request('/package.json', (event) => {\r\n      const target = event.target;\r\n      if (target.readyState == 4 && target.status == 200) {\r\n        this.npmFile = JSON.parse(target.response);\r\n      }\r\n    });\r\n  }\r\n\r\n  fileChange(change) {\r\n    if (this.npmFile && this.backedNpmFile) {\r\n      this.name = this.npmFile.name;\r\n      // const authors = this.bowerFile.authors || this.npmFile.authors;\r\n      // const homepage = this.bowerFile.homepage || this.npmFile.homepage;\r\n      this.version = this.npmFile.version;\r\n      this.backedVersion = this.backedNpmFile.version;\r\n    }\r\n  }\r\n\r\n  nameChange(change) {\r\n    this.querySelector('.project').innerHTML = `${change.value}`;\r\n  }\r\n\r\n  versionChange(change) {\r\n    this.querySelector('.project-version').innerHTML = `${change.value}`;\r\n  }\r\n\r\n  backedVersionChange(change) {\r\n    this.querySelector('.project-version.backed').innerHTML = `${change.value}`;\r\n  }\r\n})\r\n"],"names":["Backed","BackedClient","HTMLElement","properties","getBackedNpmFile","getNpmFile","error","warn","url","cb","xhttp","XMLHttpRequest","onreadystatechange","open","send","request","event","target","readyState","status","backedNpmFile","JSON","parse","response","npmFile","change","name","version","backedVersion","querySelector","innerHTML","value"],"mappings":";;;AACAA,OAAO,MAAMC,YAAN,SAA2BC,WAA3B,CAAuC;aAEjCC,UAAX,GAAwB;WACf;qBACU;kBACH;OAFP;eAKI;kBACG;OANP;YASC;kBACM;OAVP;eAaI;kBACG;OAdP;qBAiBU;kBACH;;KAlBd;;cAuBU;QAGN;WACGC,gBAAL;WACKC,UAAL;KAFF,CAGE,OAAOC,KAAP,EAAc;cACNC,IAAR,CAAaD,KAAb;;;UAIIE,GAAR,EAAaC,EAAb,EAAiB;QACXC,QAAQ,IAAIC,cAAJ,EAAZ;UACMC,kBAAN,GAA2BH,EAA3B;UACMI,IAAN,CAAW,KAAX,EAAkBL,GAAlB,EAAuB,IAAvB;UACMM,IAAN;;qBAGiB;SACZC,OAAL,CAAa,mCAAb,EAAmDC,KAAD,IAAW;YACrDC,SAASD,MAAMC,MAArB;UACIA,OAAOC,UAAP,IAAqB,CAArB,IAA0BD,OAAOE,MAAP,IAAiB,GAA/C,EAAoD;aAC7CC,aAAL,GAAqBC,KAAKC,KAAL,CAAWL,OAAOM,QAAlB,CAArB;;KAHJ;;eAQW;SACNR,OAAL,CAAa,eAAb,EAA+BC,KAAD,IAAW;YACjCC,SAASD,MAAMC,MAArB;UACIA,OAAOC,UAAP,IAAqB,CAArB,IAA0BD,OAAOE,MAAP,IAAiB,GAA/C,EAAoD;aAC7CK,OAAL,GAAeH,KAAKC,KAAL,CAAWL,OAAOM,QAAlB,CAAf;;KAHJ;;aAQSE,MAAX,EAAmB;QACb,KAAKD,OAAL,IAAgB,KAAKJ,aAAzB,EAAwC;WACjCM,IAAL,GAAY,KAAKF,OAAL,CAAaE,IAAzB;WAGKC,OAAL,GAAe,KAAKH,OAAL,CAAaG,OAA5B;WACKC,aAAL,GAAqB,KAAKR,aAAL,CAAmBO,OAAxC;;;aAIOF,MAAX,EAAmB;SACZI,aAAL,CAAmB,UAAnB,EAA+BC,SAA/B,GAA4C,GAAEL,OAAOM,KAAM,EAA3D;;gBAGYN,MAAd,EAAsB;SACfI,aAAL,CAAmB,kBAAnB,EAAuCC,SAAvC,GAAoD,GAAEL,OAAOM,KAAM,EAAnE;;sBAGkBN,MAApB,EAA4B;SACrBI,aAAL,CAAmB,yBAAnB,EAA8CC,SAA9C,GAA2D,GAAEL,OAAOM,KAAM,EAA1E;;CAjFJ;;"}